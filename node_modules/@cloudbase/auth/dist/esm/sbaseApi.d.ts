import type { ICloudbaseAuthConfig } from '@cloudbase/types/auth';
import type { authModels, CloudbaseOAuth } from '@cloudbase/oauth';
import type { ICloudbaseCache } from '@cloudbase/types/cache';
import { CommonRes, DeleteMeReq, GetClaimsRes, GetUserIdentitiesRes, GetUserRes, LinkIdentityReq, LinkIdentityRes, OnAuthStateChangeCallback, ReauthenticateRes, ResendReq, ResendRes, ResetPasswordForEmailRes, ResetPasswordForOldReq, SetSessionReq, SignInAnonymouslyReq, SignInOAuthRes, SignInRes, SignInWithIdTokenReq, SignInWithOAuthReq, SignInWithOtpReq, SignInWithOtpRes, SignInWithPasswordReq, SignUpRes, UnlinkIdentityReq, UpdateUserReq, UpdateUserWithVerificationRes, VerifyOAuthReq, VerifyOtpReq } from './type';
import { LoginState, User } from '.';
export declare const isBrowser: () => boolean;
export declare class SbaseApi {
    readonly config: ICloudbaseAuthConfig;
    oauthInstance: CloudbaseOAuth;
    readonly cache: ICloudbaseCache;
    private listeners;
    private hasListenerSetUp;
    constructor(config: ICloudbaseAuthConfig & {
        cache: ICloudbaseCache;
    });
    get currentUser(): User;
    hasLoginState(): LoginState | null;
    setAccessKey(): Promise<void>;
    signIn(_params: authModels.SignInRequest): Promise<LoginState>;
    signInWithProvider(_params: authModels.SignInWithProviderRequest): Promise<LoginState>;
    genProviderRedirectUri(_params: authModels.GenProviderRedirectUriRequest): Promise<authModels.GenProviderRedirectUriResponse>;
    getAccessToken(): Promise<{
        accessToken: any;
        env: string;
    }>;
    getUserInfo(): Promise<(authModels.UserInfo & Partial<User>) | null>;
    updateUserBasicInfo(_params: authModels.ModifyUserBasicInfoRequest): Promise<void>;
    setCustomSignFunc(_getTickFn: authModels.GetCustomSignTicketFn): void;
    grantProviderToken(_params: authModels.GrantProviderTokenRequest): Promise<authModels.GrantProviderTokenResponse>;
    bindWithProvider(_params: authModels.BindWithProviderRequest): Promise<void>;
    signInWithUsername(_params: {
        verificationInfo?: {
            verification_id: string;
            is_user: boolean;
        };
        verificationCode?: string;
        username?: string;
        bindInfo?: any;
        loginType?: string;
        autoSignUp?: boolean;
    }): Promise<LoginState>;
    getVerification(_params: authModels.GetVerificationRequest, _options?: {
        withCaptcha: boolean;
    }): Promise<authModels.GetVerificationResponse>;
    createLoginState(_params?: {
        version?: string;
        query?: any;
    }, _options?: {
        asyncRefreshUser?: boolean;
    }): Promise<LoginState>;
    verify(_params: authModels.VerifyRequest): Promise<authModels.VerifyResponse>;
    signInAnonymously(params: SignInAnonymouslyReq): Promise<SignInRes>;
    signUp(params: authModels.SignUpRequest): Promise<SignUpRes>;
    signOut(params?: authModels.SignoutRequest): Promise<void | authModels.SignoutReponse>;
    onAuthStateChange(callback: OnAuthStateChangeCallback): {
        data: {
            subscription: {
                id: string;
                callback: OnAuthStateChangeCallback;
                unsubscribe: () => void;
            };
        };
    };
    signInWithPassword(params: SignInWithPasswordReq): Promise<SignInRes>;
    signInWithIdToken(params: SignInWithIdTokenReq): Promise<SignInRes>;
    signInWithOtp(params: SignInWithOtpReq): Promise<SignInWithOtpRes>;
    verifyOAuth(params?: VerifyOAuthReq): Promise<SignInRes | LinkIdentityRes>;
    signInWithOAuth(params: SignInWithOAuthReq): Promise<SignInOAuthRes>;
    signInWithSSO(): Promise<void>;
    signInWithWeb3(): Promise<void>;
    getClaims(): Promise<GetClaimsRes>;
    resetPasswordForEmail(emailOrPhone: string, options?: {
        redirectTo?: string;
    }): Promise<ResetPasswordForEmailRes>;
    resetPasswordForOld(params: ResetPasswordForOldReq): Promise<{
        data: {
            user: import("./type").User;
            session: import("./type").Session;
        };
        error: any;
    } | {
        data: {
            user?: undefined;
            session?: undefined;
        };
        error: any;
    }>;
    verifyOtp(params: VerifyOtpReq): Promise<SignInRes>;
    getSession(): Promise<SignInRes>;
    refreshSession(refresh_token?: string): Promise<SignInRes>;
    getUser(): Promise<GetUserRes>;
    refreshUser(): Promise<CommonRes>;
    updateUser(params: UpdateUserReq): Promise<GetUserRes | UpdateUserWithVerificationRes>;
    getUserIdentities(): Promise<GetUserIdentitiesRes>;
    linkIdentity(params: LinkIdentityReq): Promise<LinkIdentityRes>;
    unlinkIdentity(params: UnlinkIdentityReq): Promise<CommonRes>;
    reauthenticate(): Promise<ReauthenticateRes>;
    resend(params: ResendReq): Promise<ResendRes>;
    setSession(params: SetSessionReq): Promise<SignInRes>;
    exchangeCodeForSession(): Promise<void>;
    deleteUser(params: DeleteMeReq): Promise<CommonRes>;
    toDefaultLoginPage(params?: authModels.ToDefaultLoginPage): Promise<CommonRes>;
    signInWithCustomTicket(getTickFn?: authModels.GetCustomSignTicketFn): Promise<SignInRes>;
    signInWithOpenId({ useWxCloud }?: {
        useWxCloud?: boolean;
    }): Promise<SignInRes>;
    signInWithPhoneAuth({ phoneCode }: {
        phoneCode?: string;
    }): Promise<SignInRes>;
    private formatPhone;
    private notifyListeners;
    private init;
    private setupListeners;
    private convertToUser;
    private validateParams;
    private validateAtLeastOne;
}
