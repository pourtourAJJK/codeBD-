"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var MyURLSearchParams = (function () {
    function MyURLSearchParams(init) {
        this.params = {};
        if (typeof init === 'string') {
            this.parse(init);
        }
        else if (init && typeof init === 'object') {
            for (var key in init) {
                if (Object.prototype.hasOwnProperty.call(init, key)) {
                    this.append(key, init[key]);
                }
            }
        }
    }
    MyURLSearchParams.prototype.parse = function (str) {
        var _this = this;
        var params = str.split('&');
        params.forEach(function (param) {
            var _a = param.split('=').map(decodeURIComponent), key = _a[0], value = _a[1];
            _this.append(key, value);
        });
    };
    MyURLSearchParams.prototype.append = function (key, value) {
        if (this.params[key]) {
            this.params[key] = this.params[key].concat([value]);
        }
        else {
            this.params[key] = [value];
        }
    };
    MyURLSearchParams.prototype.get = function (key) {
        return this.params[key] ? this.params[key][0] : null;
    };
    MyURLSearchParams.prototype.getAll = function (key) {
        return this.params[key] || [];
    };
    MyURLSearchParams.prototype.delete = function (key) {
        delete this.params[key];
    };
    MyURLSearchParams.prototype.has = function (key) {
        return Object.prototype.hasOwnProperty.call(this.params, key);
    };
    MyURLSearchParams.prototype.set = function (key, value) {
        this.params[key] = [value];
    };
    MyURLSearchParams.prototype.toString = function () {
        var items = [];
        var _loop_1 = function (key) {
            if (Object.prototype.hasOwnProperty.call(this_1.params, key)) {
                this_1.params[key].forEach(function (value) {
                    items.push("".concat(encodeURIComponent(key), "=").concat(encodeURIComponent(value)));
                });
            }
        };
        var this_1 = this;
        for (var key in this.params) {
            _loop_1(key);
        }
        return items.join('&');
    };
    return MyURLSearchParams;
}());
exports.default = MyURLSearchParams;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXJsU2VhcmNoUGFyYW1zLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL3V0aWxzL3VybFNlYXJjaFBhcmFtcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUdBO0lBR0UsMkJBQVksSUFBSTtRQUNkLElBQUksQ0FBQyxNQUFNLEdBQUcsRUFBRSxDQUFBO1FBQ2hCLElBQUksT0FBTyxJQUFJLEtBQUssUUFBUSxFQUFFO1lBQzVCLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUE7U0FDakI7YUFBTSxJQUFJLElBQUksSUFBSSxPQUFPLElBQUksS0FBSyxRQUFRLEVBQUU7WUFFM0MsS0FBSyxJQUFNLEdBQUcsSUFBSSxJQUFJLEVBQUU7Z0JBQ3RCLElBQUksTUFBTSxDQUFDLFNBQVMsQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxHQUFHLENBQUMsRUFBRTtvQkFDbkQsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUE7aUJBQzVCO2FBQ0Y7U0FDRjtJQUNILENBQUM7SUFHRCxpQ0FBSyxHQUFMLFVBQU0sR0FBRztRQUFULGlCQU1DO1FBTEMsSUFBTSxNQUFNLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQTtRQUM3QixNQUFNLENBQUMsT0FBTyxDQUFDLFVBQUMsS0FBSztZQUNiLElBQUEsS0FBZSxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxrQkFBa0IsQ0FBQyxFQUF0RCxHQUFHLFFBQUEsRUFBRSxLQUFLLFFBQTRDLENBQUE7WUFDN0QsS0FBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLEVBQUUsS0FBSyxDQUFDLENBQUE7UUFDekIsQ0FBQyxDQUFDLENBQUE7SUFDSixDQUFDO0lBR0Qsa0NBQU0sR0FBTixVQUFPLEdBQUcsRUFBRSxLQUFLO1FBQ2YsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxFQUFFO1lBQ3BCLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFBO1NBQ3BEO2FBQU07WUFDTCxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUE7U0FDM0I7SUFDSCxDQUFDO0lBR0QsK0JBQUcsR0FBSCxVQUFJLEdBQUc7UUFDTCxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQTtJQUN0RCxDQUFDO0lBR0Qsa0NBQU0sR0FBTixVQUFPLEdBQUc7UUFDUixPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRSxDQUFBO0lBQy9CLENBQUM7SUFHRCxrQ0FBTSxHQUFOLFVBQU8sR0FBRztRQUNSLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQTtJQUN6QixDQUFDO0lBR0QsK0JBQUcsR0FBSCxVQUFJLEdBQUc7UUFDTCxPQUFPLE1BQU0sQ0FBQyxTQUFTLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLEdBQUcsQ0FBQyxDQUFBO0lBQy9ELENBQUM7SUFHRCwrQkFBRyxHQUFILFVBQUksR0FBRyxFQUFFLEtBQUs7UUFDWixJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUE7SUFDNUIsQ0FBQztJQUdELG9DQUFRLEdBQVI7UUFDRSxJQUFNLEtBQUssR0FBRyxFQUFFLENBQUE7Z0NBRUwsR0FBRztZQUNaLElBQUksTUFBTSxDQUFDLFNBQVMsQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLE9BQUssTUFBTSxFQUFFLEdBQUcsQ0FBQyxFQUFFO2dCQUMxRCxPQUFLLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxPQUFPLENBQUMsVUFBQyxLQUFLO29CQUM3QixLQUFLLENBQUMsSUFBSSxDQUFDLFVBQUcsa0JBQWtCLENBQUMsR0FBRyxDQUFDLGNBQUksa0JBQWtCLENBQUMsS0FBSyxDQUFDLENBQUUsQ0FBQyxDQUFBO2dCQUN2RSxDQUFDLENBQUMsQ0FBQTthQUNIOzs7UUFMSCxLQUFLLElBQU0sR0FBRyxJQUFJLElBQUksQ0FBQyxNQUFNO29CQUFsQixHQUFHO1NBTWI7UUFDRCxPQUFPLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUE7SUFDeEIsQ0FBQztJQUNILHdCQUFDO0FBQUQsQ0FBQyxBQXpFRCxJQXlFQztBQUVELGtCQUFlLGlCQUFpQixDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiDlhbzlrrnlsI/nqIvluo9cbiAqL1xuY2xhc3MgTXlVUkxTZWFyY2hQYXJhbXMge1xuICBwYXJhbXM6IHt9XG5cbiAgY29uc3RydWN0b3IoaW5pdCkge1xuICAgIHRoaXMucGFyYW1zID0ge31cbiAgICBpZiAodHlwZW9mIGluaXQgPT09ICdzdHJpbmcnKSB7XG4gICAgICB0aGlzLnBhcnNlKGluaXQpXG4gICAgfSBlbHNlIGlmIChpbml0ICYmIHR5cGVvZiBpbml0ID09PSAnb2JqZWN0Jykge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG4gICAgICBmb3IgKGNvbnN0IGtleSBpbiBpbml0KSB7XG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoaW5pdCwga2V5KSkge1xuICAgICAgICAgIHRoaXMuYXBwZW5kKGtleSwgaW5pdFtrZXldKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8g6Kej5p6Q5p+l6K+i5a2X56ym5LiyXG4gIHBhcnNlKHN0cikge1xuICAgIGNvbnN0IHBhcmFtcyA9IHN0ci5zcGxpdCgnJicpXG4gICAgcGFyYW1zLmZvckVhY2goKHBhcmFtKSA9PiB7XG4gICAgICBjb25zdCBba2V5LCB2YWx1ZV0gPSBwYXJhbS5zcGxpdCgnPScpLm1hcChkZWNvZGVVUklDb21wb25lbnQpXG4gICAgICB0aGlzLmFwcGVuZChrZXksIHZhbHVlKVxuICAgIH0pXG4gIH1cblxuICAvLyDmt7vliqDlj4LmlbBcbiAgYXBwZW5kKGtleSwgdmFsdWUpIHtcbiAgICBpZiAodGhpcy5wYXJhbXNba2V5XSkge1xuICAgICAgdGhpcy5wYXJhbXNba2V5XSA9IHRoaXMucGFyYW1zW2tleV0uY29uY2F0KFt2YWx1ZV0pXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucGFyYW1zW2tleV0gPSBbdmFsdWVdXG4gICAgfVxuICB9XG5cbiAgLy8g6I635Y+W5Y+C5pWw5YC877yI5Y2V5Liq5YC877yJXG4gIGdldChrZXkpIHtcbiAgICByZXR1cm4gdGhpcy5wYXJhbXNba2V5XSA/IHRoaXMucGFyYW1zW2tleV1bMF0gOiBudWxsXG4gIH1cblxuICAvLyDojrflj5blj4LmlbDlgLzvvIjmiYDmnInlgLzvvIlcbiAgZ2V0QWxsKGtleSkge1xuICAgIHJldHVybiB0aGlzLnBhcmFtc1trZXldIHx8IFtdXG4gIH1cblxuICAvLyDliKDpmaTlj4LmlbBcbiAgZGVsZXRlKGtleSkge1xuICAgIGRlbGV0ZSB0aGlzLnBhcmFtc1trZXldXG4gIH1cblxuICAvLyDmo4Dmn6Xlj4LmlbDmmK/lkKblrZjlnKhcbiAgaGFzKGtleSkge1xuICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodGhpcy5wYXJhbXMsIGtleSlcbiAgfVxuXG4gIC8vIOiuvue9ruWPguaVsOWAvFxuICBzZXQoa2V5LCB2YWx1ZSkge1xuICAgIHRoaXMucGFyYW1zW2tleV0gPSBbdmFsdWVdXG4gIH1cblxuICAvLyDov5Tlm57mn6Xor6LlrZfnrKbkuLJcbiAgdG9TdHJpbmcoKSB7XG4gICAgY29uc3QgaXRlbXMgPSBbXVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMucGFyYW1zKSB7XG4gICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaXMucGFyYW1zLCBrZXkpKSB7XG4gICAgICAgIHRoaXMucGFyYW1zW2tleV0uZm9yRWFjaCgodmFsdWUpID0+IHtcbiAgICAgICAgICBpdGVtcy5wdXNoKGAke2VuY29kZVVSSUNvbXBvbmVudChrZXkpfT0ke2VuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSl9YClcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGl0ZW1zLmpvaW4oJyYnKVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IE15VVJMU2VhcmNoUGFyYW1zXG4iXX0=