<view class="info-page">
  <!-- 头部（返回+标题） -->
  <view class="header">
    <view class="back-btn" bindtap="navigateBack">
      <text class="back-icon">←</text>
    </view>
    <view class="title">个人信息</view>
  </view>

  <!-- 基础信息模块 -->
  <view class="info-module">
    <view class="module-title">基础信息</view>
    <!-- 头像 -->
    <view class="info-item" bindtap="onAvatarTap">
      <text class="item-label">头像</text>
      <view class="item-content">
        <image class="avatar" src="{{userInfo.avatar || '/images/avatar.png'}}" mode="widthFix"></image>
        <view class="avatar-hint">点击同步微信头像或上传本地头像</view>
      </view>
    </view>
    <!-- 昵称 -->
    <view class="info-item">
      <text class="item-label">昵称</text>
      <view class="item-content">
        <input 
          class="nickname-input" 
          placeholder="请输入昵称" 
          value="{{userInfo.nickname}}" 
          bindinput="onNicknameInput" 
          bindfocus="onNicknameFocus"
          bindblur="onNicknameBlur"
        />
        <button 
          class="sync-btn" 
          bindtap="onSyncWechatInfo"
        >
          同步微信昵称
        </button>
      </view>
    </view>
    <!-- 性别 -->
    <view class="info-item arrow-item" bindtap="editInfo" data-label="性别">
      <text class="item-label">性别</text>
      <view class="item-content">
        <text class="content-text">{{userInfo.gender}}</text>
        <image class="arrow-icon" src="/images/arrow-right.png"></image>
      </view>
    </view>
    <!-- 生日 -->
    <view class="info-item arrow-item" bindtap="editInfo" data-label="生日">
      <text class="item-label">生日</text>
      <view class="item-content">
        <text class="content-text">{{userInfo.birthday || '请选择'}}</text>
        <image class="arrow-icon" src="/images/arrow-right.png"></image>
      </view>
    </view>
    <!-- 所在地区 -->
    <view class="info-item arrow-item" bindtap="editInfo" data-label="所在城市">
      <text class="item-label">所在地区</text>
      <view class="item-content">
        <text class="content-text">{{userInfo.province && userInfo.city && userInfo.district ? userInfo.province + '/' + userInfo.city + '/' + userInfo.district : '请选择'}}</text>
        <image class="arrow-icon" src="/images/arrow-right.png"></image>
      </view>
    </view>
  </view>

  <!-- 绑定信息模块 -->
  <view class="info-module">
    <view class="module-title">绑定信息</view>
    <!-- 手机号 -->
    <view class="info-item">
      <text class="item-label">手机号</text>
      <view class="item-content">
        <text class="content-text">15089728216</text>
      </view>
    </view>
    <!-- 微信 -->
    <view class="info-item">
      <text class="item-label">微信</text>
      <view class="item-content">
        <text class="content-text">微信用户</text>
      </view>
    </view>
  </view>
  
  <!-- 自定义生日选择器 -->
  <view class="picker-modal" wx:if="{{showBirthdayPicker}}">
    <!-- 遮罩层 -->
    <view class="picker-overlay" bindtap="closeBirthdayPicker"></view>
    <!-- 选择器主体 -->
    <view class="picker-content">
      <!-- 标题栏 -->
      <view class="picker-header">
        <text class="picker-cancel" bindtap="closeBirthdayPicker">取消</text>
        <text class="picker-title">选择生日</text>
        <text class="picker-confirm" bindtap="confirmBirthday">确认</text>
      </view>
      <!-- 选择器滚轮 -->
      <view class="picker-wheel-container">
        <picker-view class="picker-wheel" bindchange="onPickerChange" value="{{[birthdayPicker.yearIndex, birthdayPicker.monthIndex, birthdayPicker.dayIndex]}}">
          <picker-view-column>
            <view class="picker-item" wx:for="{{birthdayPicker.years}}" wx:key="*this">{{item}}年</view>
          </picker-view-column>
          <picker-view-column>
            <view class="picker-item" wx:for="{{birthdayPicker.months}}" wx:key="*this">{{item}}月</view>
          </picker-view-column>
          <picker-view-column>
            <view class="picker-item" wx:for="{{birthdayPicker.days}}" wx:key="*this">{{item}}日</view>
          </picker-view-column>
        </picker-view>
      </view>
    </view>
  </view>
  
  <!-- 自定义地区选择器 -->
  <view class="picker-modal" wx:if="{{showRegionPicker}}">
    <!-- 遮罩层 -->
    <view class="picker-overlay" bindtap="closeRegionPicker"></view>
    <!-- 选择器主体 -->
    <view class="picker-content">
      <!-- 标题栏 -->
      <view class="picker-header">
        <text class="picker-cancel" bindtap="closeRegionPicker">取消</text>
        <text class="picker-title">选择所在地区</text>
        <text class="picker-confirm" bindtap="confirmRegion">确认</text>
      </view>
      <!-- 选择器滚轮 -->
      <view class="picker-wheel-container">
        <picker-view class="picker-wheel" bindchange="onRegionPickerChange" value="{{[regionData.provinceIndex, regionData.cityIndex, regionData.districtIndex]}}">
          <!-- 省份列 -->
          <picker-view-column>
            <view class="picker-item" wx:for="{{regionData.provinces}}" wx:key="*this">{{item.name}}</view>
          </picker-view-column>
          <!-- 城市列 -->
          <picker-view-column>
            <view class="picker-item" wx:for="{{regionData.provinces[regionData.provinceIndex].cities}}" wx:key="*this">{{item.name}}</view>
          </picker-view-column>
          <!-- 区县列 -->
          <picker-view-column>
            <view class="picker-item" wx:for="{{regionData.provinces[regionData.provinceIndex].cities[regionData.cityIndex].districts}}" wx:key="*this">{{item}}</view>
          </picker-view-column>
        </picker-view>
      </view>
    </view>
  </view>
</view>