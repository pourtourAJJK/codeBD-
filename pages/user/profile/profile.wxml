<!-- 登录页 WXML -->
<view class="page-container">
  <!-- 顶部导航栏 -->
  <view class="nav-bar">
    <text class="nav-back" bindtap="navigateBack">←</text>
    <text class="nav-title">登录</text>
    <view class="nav-right"></view>
  </view>

  <!-- 基础信息模块 -->
  <view class="section">
    <text class="section-title">基础信息</text>
    <!-- 头像（官方规范选择方式） -->
    <view class="info-item">
      <text class="info-label">头像</text>
      <button
        class="info-content avatar-btn"
        open-type="chooseAvatar"
        bind:chooseavatar="onChooseAvatar"
      >
        <image class="avatar-img" src="{{userInfo.avatarUrl || 'https://mmbiz.qpic.cn/mmbiz/icTdbqWNOwNRna42FI242Lcia07jQodd2FJGIYQfG0LAJGFxM4FbnQP6yfMxBgJ0F3YRqJCJ1aPAK2dQagdusBZg/0'}}"></image>
      </button>
    </view>

    <!-- 昵称（官方规范填写方式，自动安全监测） -->
    <view class="info-item">
      <text class="info-label">昵称</text>
      <input 
        type="nickname" 
        class="info-input" 
        placeholder="请输入昵称" 
        value="{{editInfo.nickname}}" 
        bindinput="onNickNameChange" 
      />
    </view>

    <!-- 性别（选择器） -->
    <view class="info-item" bindtap="openGenderPicker">
      <text class="info-label">性别</text>
      <view class="info-select">
        <text>{{editInfo.gender === 1 ? '男' : editInfo.gender === 2 ? '女' : '未知'}}</text>
        <text class="arrow">→</text>
      </view>
    </view>

    <!-- ✅ 删除生日字段 -->
    <!-- ✅ 删除所在地区字段 -->
  </view>

  <!-- 绑定信息模块 -->
  <view class="section">
    <text class="section-title">绑定信息</text>
    <!-- ✅ 手机号（授权后自动填充，设为不可编辑） -->
    <view class="info-item">
      <text class="info-label">手机号</text>
      <input 
        class="info-input" 
        placeholder="{{editInfo.phoneNumber ? editInfo.phoneNumber : '请先获取手机号'}}" 
        value="{{editInfo.phoneNumber}}" 
        disabled="true"
        style="color: {{editInfo.phoneNumber ? '#333' : '#999'}};"
      />
    </view>

    <!-- ✅ 微信手机号授权按钮（授权后隐藏） -->
    <view class="info-item" wx:if="{{!editInfo.phoneNumber}}">
      <text class="info-label">获取手机号</text>
      <button 
        class="wechat-phone-btn"
        open-type="getPhoneNumber"
        bindgetphonenumber="onGetPhoneNumber"
        style="width: 200rpx; padding: 10rpx 0; font-size: 24rpx; border-radius: 8rpx; background: #07c160; color: #fff;"
      >
        微信手机号授权
      </button>
    </view>

    <!-- 微信（不可修改，仅展示） -->
    <view class="info-item">
      <text class="info-label">微信</text>
      <text class="info-content-static">{{userInfo.nickName || '微信用户'}}</text>
    </view>
  </view>

  <!-- 保存并登录按钮 -->
  <button class="save-btn" bindtap="saveAndLogin">保存并登录</button>
  
  <!-- ✅ 删除生日选择器 -->
  
  <!-- ✅ 删除地区选择器 -->
</view>