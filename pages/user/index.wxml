<!-- 编辑资料页 WXML -->
<view class="page-container">
  <!-- 顶部导航栏 -->
  <view class="nav-bar">
    <text class="nav-back" bindtap="navigateBack">←</text>
    <text class="nav-title">个人信息</text>
    <view class="nav-right"></view>
  </view>

  <!-- 基础信息模块 -->
  <view class="section">
    <text class="section-title">基础信息</text>
    <!-- 头像（可上传） -->
    <view class="info-item">
      <text class="info-label">头像</text>
      <view class="info-content" bindtap="chooseAvatar">
        <image class="avatar-img" src="{{userInfo.avatarUrl || '/images/default-avatar.png'}}"></image>
      </view>
    </view>

    <!-- 昵称（可输入） -->
    <view class="info-item">
      <text class="info-label">昵称</text>
      <input class="info-input" placeholder="请输入昵称" value="{{editInfo.nickName}}" bindinput="onNickNameChange" />
    </view>

    <!-- 性别（选择器） -->
    <view class="info-item" bindtap="openGenderPicker">
      <text class="info-label">性别</text>
      <view class="info-select">
        <text>{{editInfo.gender === 1 ? '男' : editInfo.gender === 2 ? '女' : '未知'}}</text>
        <text class="arrow">→</text>
      </view>
    </view>

    <!-- 生日（日期选择器） -->
    <view class="info-item" bindtap="openBirthdayPicker">
      <text class="info-label">生日</text>
      <view class="info-select">
        <text>{{editInfo.birthday || '请选择'}}</text>
        <text class="arrow">→</text>
      </view>
    </view>

    <!-- 所在城市（地区选择器） -->
    <view class="info-item" bindtap="openCityPicker">
      <text class="info-label">所在城市</text>
      <view class="info-select">
        <text>{{editInfo.city.join(' ') || '请选择'}}</text>
        <text class="arrow">→</text>
      </view>
    </view>
  </view>

  <!-- 绑定信息模块 -->
  <view class="section">
    <text class="section-title">绑定信息</text>
    <!-- 手机号（可输入） -->
    <view class="info-item">
      <text class="info-label">手机号</text>
      <input 
        class="info-input" 
        placeholder="请输入手机号" 
        value="{{editInfo.phone}}" 
        bindinput="onPhoneChange"
        type="number"
      />
    </view>

    <!-- 微信（不可修改，仅展示） -->
    <view class="info-item">
      <text class="info-label">微信</text>
      <text class="info-content-static">{{userInfo.nickName || '微信用户'}}</text>
    </view>
  </view>

  <!-- 保存按钮 -->
  <button class="save-btn" bindtap="saveUserInfo">保存</button>
</view>